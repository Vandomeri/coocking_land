var itemsRaccomandatore = null;

function strip_animation() {
    "undefined" != typeof GZheader && GZheaderOptions.topstrip && GZheader.topstrip()
} ! function () {
    var e, t, n, a;

    function o() {
        (window.scrollY || window.pageYOffset || document.documentElement.scrollTop) > a.offsetHeight ? (n.classList.add("hiding"), setTimeout(function () {
            n.classList.remove("hiding"), n.classList.remove("pushing"), console.log("[MH Fix] rimossa pushing su scroll strip " + parseInt((performance.now() - window.tmhtest) / 1e3)), e.style.height = "auto", t.style.height = "auto", isPushing = !1
        }, 300)) : (n.classList.remove("pushing"), console.log("[MH Fix] rimossa pushing su utente non scrollante strip " + parseInt((performance.now() - window.tmhtest) / 1e3)), t.style.height = "auto", e.style.height = "auto", isPushing = !1)
    }
    "undefined" == typeof GZheader && (GZheader = {}), GZheader.topstrip = function () {
        if (window.topStripTimeStart = performance.now(), console.log("stripToTop start", topStripTimeStart), !is_bnzm_pdown) {
            document.getElementById("gz-header-header"), e = document.getElementsByClassName("static-container")[0], t = document.getElementsByClassName("flying-container")[0], n = document.getElementsByTagName("body")[0], (a = document.getElementById("gpt_strip_adv")).classList.remove("advCollapse"), e.style.height = t.offsetHeight + "px", t.style.height = e.offsetHeight + "px", n.classList.add("pushing"), isPushing = !0, console.log("Ã¨ una pushdown? " + is_bnzm_pdown);
            var s = 0,
                i = setInterval(function () {
                    0 == a.offsetHeight ? (clearInterval(i), t.style.height = "auto", e.style.height = "auto", n.classList.remove("pushing"), console.log("stripToTop rimossa pushing su test tempo"), console.log("[MH Fix] rimossa pushing su test tempo " + parseInt((performance.now() - window.tmhtest) / 1e3))) : 5e3 == s && clearInterval(i), s += 100
                }, 100);
            is_bnzm_pdown || setTimeout(function () {
                if ("undefined" != typeof gptStripViewableTime) {
                    let e = Math.round(performance.now() - gptStripViewableTime) || null;
                    if (console.log("stripToTop viewableSinceTime", e), null != e && e > 3500) console.log("stripToTop erogazione con timing ordinario"), o();
                    else {
                        let t = 3500 - e || 0;
                        console.log("stripToTop timeout aggiuntivo per ritardo view", t), setTimeout(() => {
                            o()
                        }, t)
                    }
                } else o()
            }, 5e3)
        }
    }
}(),
    function () {
        var e, t, n, a, o, s, i, r;

        function l(t) {
            t.preventDefault(), t.stopImmediatePropagation(), i.classList.contains("gz-header-search-opened") ? (i.classList.remove("gz-header-search-opened"), e.blur()) : (e.focus(), e.placeholder = s, i.classList.add("gz-header-search-opened"), "desktop" != device && window.addEventListener("scroll", d, !1))
        }

        function c(t) {
            0 != e.value.length ? search_container.classList.add("gz-header-search-active") : search_container.classList.remove("gz-header-search-active")
        }

        function d(t) {
            (window.scrollY || window.pageYOffset || document.documentElement.scrollTop) > r && i.classList.contains("gz-header-search-opened") && (i.classList.remove("gz-header-search-opened"), e.placeholder = "", e.blur())
        }
        "undefined" == typeof GZheader && (GZheader = {}), GZheader.search = function (d) {
            a = void 0 !== d && Object.keys(d).length > 0 ? d : {}, search_container = document.getElementsByClassName("gz-header-search-container")[0], e = document.getElementsByClassName("gz-header-search-input")[0], t = document.getElementsByClassName("gz-header-search-form")[0], n = document.getElementById("gz-header-search"), o = document.getElementById("gz-header-search-close"), s = a.placeholder ? a.placeholder : dictionary.searchARecipe, i = document.getElementById("gz-header"), 0, r = 50, e.addEventListener("input", c, !1), n && o && (n.addEventListener("click", l, !1), o.addEventListener("click", l, !1), a.submitCallback && t.addEventListener("submit", function (e) {
                window[a.submitCallback](e)
            }, !1)), s && a.visible && (e.placeholder = s)
        }
    }(),
    function () {
        "undefined" == typeof GZheader && (GZheader = {});
        var e, t, n, a, o, s, i, r, l, c, d, g, u, m;

        function p(t) {
            (function (t, n) {
                for (; t.parentNode && t.parentElement !== e;)
                    if ((t = t.parentNode).classList.contains(n)) return t;
                return null
            })(t.target, "gz-header-user-overlay-opened") || t.preventDefault()
        }

        function v(e) {
            t.classList.contains("gz-header-user-overlay-opened") && (t.classList.remove("gz-header-user-overlay-opened"), document.removeEventListener("touchmove", p, !1), z())
        }

        function f(e) {
            var t = document.getElementById("gz-user-login-redirect"),
                n = document.getElementById("gz-header-user-social-login-btn-fb"),
                a = document.getElementById("gz-header-user-social-login-btn-apple"),
                o = "",
                s = e.detail.action,
                i = !!e.detail.modal,
                r = redirectUrl + "?GZmodal=" + i + "#" + s;
            "listaspesa" == s ? o = dictionary.loginShoppingListMessage : "fotocommenti" == s ? o = dictionary.loginPhotoCommentsMessage : "collezioni" == s ? o = dictionary.loginCookbookMessage : "commenti" == s && (o = dictionary.loginCommentsMessage), t.value = r, n.setAttribute("href", fbLoginUrl + "&state=" + btoa(r)), a.setAttribute("href", appleLoginUrl + "&state=" + btoa(r)), g.innerHTML = o, g.classList.add("active"), h()
        }

        async function y() {
            if (itemsRaccomandatore) b();
            else {
                let e = function (e) {
                    const t = document.cookie.split(";").reduce((e, t) => {
                        const [n, a] = t.split("=").map(e => e.trim());
                        return n && a && (e[n] = decodeURIComponent(a)), e
                    }, {});
                    return e ? t[e] || "" : t
                }("raccomandatore") || null;
                e ? localStorage.setItem("raccomandatore", encodeURIComponent(e)) : localStorage.getItem("raccomandatore") && (e = localStorage.getItem("raccomandatore"));
                let t = localStorage.getItem("kxkuid") || null,
                    n = localStorage.getItem("localEtsId") || null;
                jsonToPost = {}, e && (e = JSON.parse(decodeURIComponent(e))).items && e.items.length > 0 && (jsonToPost = e, jsonToPost.page = 0, jsonToPost.url = document.location.href), jsonToPost.ids = {
                    uid: n,
                    kx: t
                }, jsonToPost.ctx = "login", console.log("[Raccomandatore] jsonToPost", jsonToPost), console.log("[Raccomandatore] jsonToPost1", JSON.stringify(jsonToPost));
                let a = await fetch("https://x77l9u4vif.execute-api.eu-west-1.amazonaws.com/prod/api/recommender/gz/v1/login/", {
                    method: "POST",
                    headers: {
                        "content-type": "application/json"
                    },
                    body: JSON.stringify(jsonToPost)
                });
                itemsRaccomandatore = await a.json(), console.log("[Raccomandatore] Risultati Fetch Login", itemsRaccomandatore), b()
            }
        }

        function b() {
            var e = itemsRaccomandatore ? itemsRaccomandatore.nodo_out : null;
            e && s && function (e) {
                for (var t = "", n = 0; n < e.length; n++) {
                    var a = w(e[n], n);
                    t += a
                }
                s.innerHTML = s.innerHTML + t, s.parentNode.classList.add("processed"), document.querySelectorAll(".gz-card-raccomandatore a").forEach(e => {
                    e.addEventListener("click", t => {
                        var n = e.getAttribute("href") + "#" + e.closest(".gz-card-raccomandatore").getAttribute("data-index");
                        ga("send", "event", "Login", "Click sui suggeriti", n, {
                            nonInteraction: !0
                        })
                    })
                })
            }(e)
        }

        function w(e, t) {
            var n = "";
            return "O" == e.tipo ? (n += '<article class="gz-card gz-card-horizontal gz-card-horizontal-mobile gz-card-raccomandatore" data-ets-algo="' + e.algo + '" data-ets-tipo="' + e.tipo + '" data-index="' + (t + 1) + '"<div class="gz-image-recipe gz-video"><a href="' + e.url + '" title="' + e.titolo + '"><picture><img src="' + e.img + '" width="400" height="400" alt="' + e.titolo + '" class="lazyload" loading="lazy" /></picture>', e.label && (n += '\x3c!-- div class="gz-label gz-orange">' + e.label + "</div --\x3e"), e.benessere && (n += '<div class="gz-label gz-benessere">BENESSERE</div>'), n += '</a></div><div class="gz-content-recipe-horizontal">', n += '<div class="gz-wrap-recipe-top">', n += '<div class="gz-title"><a href="' + e.url + '" title="' + e.titolo + '">' + e.titolo + "</a></div>", (e.fb_like || e.fb_video_views) && (n += '<ul class="gz-data-recipe top">', e.fb_like && (n += '<li class="gz-single-data-recipe"><span class="gz-icon gz-icon-likesocial"><svg viewBox="0 0 18 18"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#likesocial-blu" /></svg></span>' + e.fb_like + "</li>"), e.fb_video_views && (n += '<li class="gz-single-data-recipe"><span class="gz-icon gz-icon-view"><svg viewBox="0 0 21 12"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#view-blu" /></svg></span>' + e.fb_video_views + "</li>"), n += "</ul>"), n += "</div></article>") : (n += '<article class="gz-card gz-card-horizontal gz-card-horizontal-mobile gz-card-raccomandatore" data-ets-algo="' + e.algo + '" data-ets-tipo="' + e.tipo + '" data-index="' + (t + 1) + '"><div class="gz-image-recipe gz-' + e.type + '"><a href="' + e.url + '" title="' + e.titolo + '"><picture><img src="' + e.img + 'foto_hd/hd360x300.jpg" width="360" height="300" alt="' + e.titolo + '" class="lazyload" loading="lazy" /></picture>', e.label && (n += '\x3c!-- div class="gz-label gz-orange">' + e.label + "</div --\x3e"), e.benessere && (n += '<div class="gz-label gz-benessere">BENESSERE</div>'), n += '</a></div><div class="gz-content-recipe-horizontal">', n += '<div class="gz-title"><a href="' + e.url + '" title="' + e.titolo + '">' + e.titolo + "</a></div>", (e.num_commenti || e.rating_average) && (n += '<ul class="gz-data-recipe top">', e.num_commenti && (n += '<li class="gz-single-data-recipe">', e.num_commenti >= 200 ? n += '<span class="gz-icon"><svg viewBox="0 0 17 18"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#commento-orange" /></svg></span>' : n += '<span class="gz-icon"><svg viewBox="0 0 24 25"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#commento-grey" /></svg></span>', n += e.num_commenti + "</li>"), e.rating_average && (n += '<li class="gz-single-data-recipe">', e.rating_average >= 4.3 ? n += '<span class="gz-icon"><svg viewBox="0 0 18 16"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#voto-orange" /></svg></span>' : n += '<span class="gz-icon"><svg viewBox="0 0 21 20"><use xlink:href="/style/images/icons.svg?cb=' + nonce + '#voto-grey" /></svg></span>', n += e.rating_average + "</li>"), n += "</ul>"), n += "</div></article>"), n
        }
    }(),
    function () {
        var e, t, n;

        function a() {
            e.offsetWidth == t.offsetWidth + 60 ? n.classList.remove("gz-header-hidden") : n.classList.add("gz-header-hidden")
        }
        "undefined" == typeof GZheader && (GZheader = {}), GZheader.calcNavigationWidth = function () {
            (e = document.getElementById("gz-header-nav")) && (n = document.getElementById("gz-header-nav-overflow-menu"), (t = e.querySelector(".gz-header-nav > ul")).style.width = "auto", a(), window.addEventListener("scroll", a, !1), window.addEventListener("resize", a, !1))
        }
    }(),
    function () {
        "undefined" == typeof GZheader && (GZheader = {});
        var e, t, n = "gz-header-";
        GZheader.populateOverlay = function (a, o) {
            e = document.getElementById(n + a), t = document.getElementById(n + o), e && t && (t.innerHTML = e.innerHTML)
        }
    }(),
    function () {
        "undefined" == typeof GZheader && (GZheader = {});
        var e, t = "gz-header-";
        GZheader.hideComponent = function (n) {
            (e = document.getElementById(t + n)) && e.classList.add("gz-header-hidden")
        }
    }(),
    function () {
        var e;

        function t(e) {
            var t = document.getElementById("gz-header-" + e).querySelectorAll(".selected");
            if (t.length > 0)
                for (var n = t[t.length - 1], a = "nav" == e ? 1 : 0; a < t.length; a++) t[a] != n && t[a].classList.contains("selected") && t[a].classList.remove("selected")
        }

        function n(e) {
            var t = e;
            t.classList.contains("selected") && t.classList.add("opened");
            for (var n = t.querySelectorAll(".gz-header-has-children a"), o = 0; o < n.length; o++) n[o].addEventListener("click", function (e) {
                e.stopPropagation()
            });
            t.addEventListener("click", a, !1)
        }

        function a(e) {
            e.preventDefault(), e.stopPropagation();
            this.classList.contains("opened") ? this.classList.remove("opened") : (! function () {
                var e = document.getElementById("gz-header-overlay-nav").querySelectorAll(".opened");
                if (e.length)
                    for (var t = 0; t < e.length; t++) e[t].classList.remove("opened")
            }(), this.classList.add("opened"))
        }
        "undefined" == typeof GZheader && (GZheader = {}), GZheader.menuManager = function () {
            if (document.getElementById("gz-header-nav") && document.getElementById("gz-header-overlay-nav")) {
                e = document.querySelectorAll(".gz-header-has-children");
                for (var a = 0; a < e.length; a++) n(e[a]);
                t("nav"), t("overlay-nav")
            }
        }
    }(),
    function () {
        var e, t, n, a, o, s, i;

        function r() {
            var n = 0 + o.offsetHeight + s.offsetHeight,
                r = n - window.pageYOffset,
                l = window.pageYOffset;
            e.classList.contains("pushing") || (r <= 0 && !i ? (e.classList.add("gz-sticky"), t.classList.add("gz-header-sticky"), i = !0) : i && l <= n && (e.classList.remove("gz-sticky"), t.classList.remove("gz-header-sticky"), i = !1)), a && function () {
                if (!e.classList.contains("pushing"))
                    for (var n = 0; n < a.length; n++) {
                        var i = a[n];
                        t.classList.contains("gz-header-sticky") ? i.style.top = "auto" : i.style.top = 55 + o.offsetHeight + s.offsetHeight - window.pageYOffset + "px"
                    }
            }()
        }
        "undefined" == typeof GZheader && (GZheader = {}), GZheader.stickyHeader = function () {
            e = document.getElementsByTagName("body")[0], t = document.getElementById("gz-header"), n = document.getElementById("gz-header-nav"), a = n ? n.querySelectorAll("ul:first-child > .gz-header-has-children > ul") : null, o = document.getElementById("gpt_strip_adv"), s = document.getElementById("av-pushdown-wrapper"), i = !1, window.addEventListener("scroll", r)
        }
    }(),
    function () {
        "undefined" == typeof GZheader && (GZheader = {});
        var e, t, n, a, o, s, i, r;

        function l(t) {
            t.preventDefault(), t.stopImmediatePropagation(), e.classList.contains("gz-header-overlay-opened") ? (e.classList.remove("gz-header-overlay-opened"), window.scrollTo(0, r), document.removeEventListener("touchmove", c, !1)) : (r = window.pageYOffset, e.classList.add("gz-header-overlay-opened"), document.addEventListener("touchmove", c, !1))
        }

        function c(e) {
            (function (e, n) {
                for (; e.parentNode && e.parentElement !== t;)
                    if ((e = e.parentNode).classList.contains(n)) return e;
                return null
            })(e.target, "gz-header-overlay-opened") || e.preventDefault()
        }

        function d(t) {
            e.classList.contains("gz-header-overlay-opened") && (e.classList.remove("gz-header-overlay-opened"), document.removeEventListener("touchmove", c, !1))
        }
        GZheader.handlers = function () {
            t = document.getElementsByTagName("html")[0], e = document.getElementsByTagName("body")[0], n = document.getElementById("gz-header-hamburger"), user_login = document.getElementById("gz-header-user-login"), s = document.getElementsByClassName("gz-header-open-menu"), a = document.getElementById("gz-header-overlay-close"), o = document.getElementById("gz-header-overlay-close-panel"), i = document.getElementById("gz-header-nav-overflow-menu"),
                function () {
                    n.addEventListener("click", l, !1);
                    for (var e = 0; e < s.length; e++) s[e].addEventListener("click", l, !1);
                    a.addEventListener("click", l, !1), i && i.addEventListener("click", l, !1), o.addEventListener("click", d, !1)
                }()
        }
    }(),
    function (e) {
        if (void 0 !== e) {
            var t = JSON.parse(JSON.stringify(e));
            for (var n in GZheader.menuManager(), GZheader.stickyHeader(), GZheader.handlers(), t) "topstrip" !== n && (t[n] ? (GZheader.populateOverlay(n, "overlay-" + n), GZheader[n] && ("boolean" != typeof t[n] ? GZheader[n](t[n]) : GZheader[n]())) : GZheader.hideComponent(n));
            GZheader.calcNavigationWidth()
        }
    }(GZheaderOptions);
//# sourceMappingURL=gzheader.min.js.map